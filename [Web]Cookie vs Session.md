# Cookie vs Session

1. 쿠키

   - 쿠키의 개념
     - 웹 사이트에 접속할 때 생성되는 정보를 담은 임시 파일
     - 서버가 사용자의 웹 브라우저에 저장하는 데이터
     - Key, Value로 구성되고 String  형태로 이루어져 있음
   - 쿠키의 사용목적
     - 세션 관리 : 로그인, 사용자 닉네임, 접속 시간 등의 서버가 알아야 할 정보를 저장
     - 개인화 : 사용자마다 다르게 그 사람에 적절한 페이지를 보여줌
     - 트래킹 : 사용자의 행동과 패턴을 분석하고 기록

   - 쿠키의 예시
     - ID저장, 로그인 상태 유지
     - 일주일간 다시 보지 않기
     - 최근 검색한 상품들을 광고에서 추천
     - 쇼핑몰 장바구니 기능

   - 쿠키의 단점
     - 방문했던 웹 사이트에 대한 정보와 개인정보가 기록되어 사생활 침해 이슈
     - 사용자에게 저장되어 보안에 취약(민감하거나 중요한 정보를 담는 것은 위험)

2. 세션

   - 세션의 특징
     - 세션 아이디는 웹 브라우저 당 1개씩 생성되어 웹 컨테이너에 저장되며 브라우저 종료시 소멸
     - 로그인한 사용자에 대해서만 세션을 생성하는 것이 아니라 로그아웃하면 새로운 사용자로 인식해서 새로운 세션이 생성

   - 세션 사용 예제

     - 세션의 속성 설정하기 : session 객체의 setAttribute() 메소드 사용

       ```
       session.setAttribute("id", "value");
       ```

       session 객체의 setAttribute() 메소드를 사용해서 

       세션의 속성을 지정하게 되면 계속 상태를 유지하는 기능을 사용

       

       세션의 속성을 사용하기 : session 객체의 getAttribute() 메소드

       ```
       String id = (String)session.getAttribute("id");
       ```

        

       단, getAttribute() 메소드는 리턴 타입이 Object 타입이므로 사용 시

       실제 할당된 객체 타입으로 형변환(casting) 필요

        

        

       세션의 속성 삭제하기 : session 객체의 removeAttribute() 메소드

       ```
       session.removeAttribute("id");
       ```

        

       세션의 모든 속성 삭제 : session 객체의 invalidate() 메소드

       ```
       session.invalidate();
       ```

3. 쿠키와 세션 비교

   \1. 저장위치

   \- 쿠키 : 클라이언트의 웹 브라우저가 지정하는 메모리 또는 하드디스크에 저장

   (단, 쿠키를 허용하지 않은 경우에는 저장되지 않습니다.)

   \- 세션 : 서버의 메모리에 저장

   \2. 저장형식

   \- 쿠키 : text형식으로 저장

   \- 서버 : Object 형식으로 저장

    

   \3. 리소스(사용되는 자원)

   \- 쿠키 : 클라이언트에 저장되고 클라이언트의 메모리를 사용하기 때문에 서버의 자원을 사용하지 않음

   \- 세션 : 세션은 서버에 저장되고 서버의 메모리로 로딩이 되기 때문에 세션이 생길때마다 서버의 리소스를 차지

    

   \4. 용량제한

   \- 쿠키 : 클라이언트도 모르게 접속되는 사이트에 의하여 설정될 수 있기 때문에 쿠키로 인해 문제가 발생하는 것을

   막고자 한 도메인당 20개 /하나의 쿠키 당 4KB로 제한

   \- 세션 : 갯수나 용량에 제한이 없음

    

   \5. 만료시점

   \- 쿠키 : 저장할 때 expires 속성을 정의해 무효화 시키면 삭제될 날짜를 지정할 수 있음

   (따로 지정되지 않은 경우에는 브라우저 종료시 만료)

   \- 세션 : 클라이언트가 로그아웃하거나, 설정한 시간동안 반응이 없을경우 무효화 되기 때문에 정확한 시점을 알 수 없음

   